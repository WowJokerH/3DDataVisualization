# 3D数据管理与可视化系统

## 项目概述

这是一个功能完整的三维数据管理与可视化系统，支持点云和网格模型的导入、分析、可视化和交互操作。

## 功能特性

### 1. 用户界面设计
- 直观的图形界面，提供菜单、文件对话框等交互方式
- 支持导入三维点云及网格模型数据
- 界面包含模型操作面板、属性显示区域和三维可视化窗口

### 2. 模型分析功能
- 点云数量统计功能
- 计算并显示几何重心坐标
- 生成AABB包围盒并可视化
- 网格模型的面片数量统计
- 计算并显示模型表面积

### 3. 可视化增强
- 基于X/Y/Z坐标值的伪彩色渲染功能
- 采用Qt6 + OpenGL实现高性能三维渲染
- 支持网格和坐标轴显示

### 4. 面向对象设计
- 抽象基类Model，包含通用模型属性和方法
- 派生PointCloud类（点云）和Mesh类（网格模型）继承自Model基类
- 每个派生类维护静态计数器，记录系统中该类型模型的实例数量

### 5. 基础功能要求
- 所有图形对象具备名称标识、顶点数量、颜色属性
- 实现Translate/TranslateTo（平移变换）
- 实现ComputeCenter（重心计算）

### 6. 扩展功能
- 颜色编辑功能
- 交互式变换操作：鼠标拖拽平移、三维旋转、缩放控制
- 数据持久化：模型导出到文件、从文件加载模型

## 技术架构

### 开发环境
- C++17标准
- Qt6框架（Core、Widgets、OpenGL、OpenGLWidgets模块）
- OpenGL图形库
- CMake构建系统

### 项目结构
```
3DVisualization/
├── CMakeLists.txt          # CMake构建配置
├── build.bat              # Windows构建脚本
├── include/                 # 头文件目录
│   ├── MainWindow.h        # 主窗口类
│   ├── Model.h             # 模型基类
│   ├── PointCloud.h        # 点云类
│   ├── Mesh.h              # 网格类
│   ├── OpenGLWidget.h      # OpenGL渲染窗口
│   ├── Vertex.h            # 顶点结构
│   ├── AABB.h              # 包围盒类
│   ├── ModelAnalyzer.h     # 模型分析器
│   ├── ColorMapper.h       # 颜色映射器
│   ├── FileImporter.h      # 文件导入导出
│   └── TransformTool.h     # 变换工具
└── src/                     # 源文件目录
    ├── main.cpp            # 程序入口
    ├── MainWindow.cpp      # 主窗口实现
    ├── Model.cpp           # 模型基类实现
    ├── PointCloud.cpp      # 点云类实现
    ├── Mesh.cpp            # 网格类实现
    ├── OpenGLWidget.cpp    # OpenGL渲染实现
    ├── ModelAnalyzer.cpp   # 模型分析实现
    ├── ColorMapper.cpp     # 颜色映射实现
    ├── FileImporter.cpp    # 文件导入导出实现
    └── TransformTool.cpp   # 变换工具实现
```

## 构建说明

### 前提条件
1. 安装CMake 3.16或更高版本
2. 安装Qt6开发环境
3. 确保系统支持OpenGL

## 使用说明

### 基本操作
1. **导入模型**：点击"文件"菜单 -> "导入模型"，选择PLY、OBJ或XYZ格式的文件
2. **查看模型**：在左侧模型列表中选择模型，右侧属性面板显示详细信息
3. **旋转视角**：鼠标左键拖拽
4. **平移视角**：鼠标右键拖拽
5. **缩放视角**：鼠标滚轮

### 模型操作
- **选中模型**：在左侧列表点击模型名称，选中的模型会显示黄色包围盒高亮
- **移动模型**：在"位置控制"面板中调整X、Y、Z坐标值
- **重置位置**：点击"重置位置"按钮将模型移动到原点(0,0,0)
- **删除模型**：选中模型后，点击"编辑" -> "删除模型"

### 模型分析
- 选择模型后，属性面板自动显示：
  - 顶点数量
  - 三角形数量（网格模型）
  - 几何重心坐标
  - AABB包围盒尺寸
  - 表面积（网格模型）

### 颜色控制
- 使用RGB滑块调整模型颜色
- 启用"伪彩色渲染"基于坐标值着色
- 选择X/Y/Z坐标轴作为伪彩色映射依据

### 文件格式支持
- **PLY格式**：支持ASCII和二进制格式，包含顶点坐标和颜色信息
- **OBJ格式**：支持顶点、法线和面片数据
- **XYZ格式**：简单的文本格式，仅包含顶点坐标

## 核心类说明

### Model（模型基类）
提供所有三维模型的通用接口，包括：
- 基本属性管理（名称、颜色、变换）
- 几何计算（重心、包围盒）
- 变换操作（平移、旋转、缩放）

### PointCloud（点云类）
继承自Model，专门处理点云数据：
- 点云特定操作（添加点、清除）
- 点云统计信息
- 点云渲染优化

### Mesh（网格类）
继承自Model，专门处理网格模型：
- 网格拓扑管理（顶点、面片）
- 表面积计算
- 网格渲染优化

### OpenGLWidget（渲染窗口）
负责三维场景的可视化：
- OpenGL上下文管理
- 相机控制和交互
- 模型渲染和着色
- 坐标轴和网格显示

## 扩展功能

### 伪彩色渲染
- 基于X、Y、Z坐标值进行颜色映射
- 使用HSV颜色空间实现平滑的颜色过渡
- 支持高度、距离等多种映射方式

### 交互式变换
- 鼠标拖拽实现模型平移
- 支持精确的数值输入变换
- 提供撤销/重做功能

### 数据持久化
- 支持多种行业标准格式的导入导出
- 保持模型属性和颜色信息
- 提供数据验证和错误处理

## 性能优化

- 使用OpenGL固定管线实现高效渲染
- 采用批处理技术减少绘制调用
- 实现视锥体裁剪和背面剔除
- 支持大规模点云和网格数据的流畅显示

## 错误处理

- 文件格式验证和错误提示
- OpenGL资源管理和异常处理
- 内存使用优化和泄漏检测
- 用户操作反馈和状态提示

## 未来扩展

- 支持更多三维文件格式（STL、FBX等）
- 实现高级着色效果（光照、材质）
- 添加模型编辑功能（顶点编辑、网格修复）
- 支持多线程处理和GPU加速
- 集成机器学习算法进行模型分析